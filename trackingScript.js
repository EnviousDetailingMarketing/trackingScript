!function(){function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)})}function n(e,n=null,t=null,r=null){if(null!==n){let i="";if(t){let o=new Date;o.setTime(o.getTime()+864e5*t),i="; expires="+o.toUTCString()}let a=`${e}=${encodeURIComponent(n)}${i}; path=/`;r&&(a+=`; domain=${r}`),document.cookie=a}else{let l=document.cookie.split(";");for(let d of l){let[s,x]=d.split("=").map(e=>e.trim());if(s===e)return decodeURIComponent(x)}return null}}let t=function t(){let r=n("user_id");if(!r){n("user_id",r=e(),365,"enviousdetailing.com");let i=document.getElementById("cookieCompliance");i&&(i.style.display="block")}return r}(),r,i=((r=n("session_id"))||n("session_id",r=e(),.5,"enviousdetailing.com"),r);async function o(e=3){let r=new URLSearchParams;r.append("userId",t),r.append("sessionId",i),r.append("eventType","pageView"),r.append("referrer",document.referrer),r.append("pageUrl",window.location.href);let o=n("_la"),a=n("_lo");o&&a&&(r.append("la",o),r.append("lo",a));let l=n("__gtm_campaign_url");l&&r.append("utmSource",l);let d="https://us-central1-envious-detailing-firestore.cloudfunctions.net/trackEvent",s=async()=>{if(navigator.sendBeacon)return navigator.sendBeacon(d,r);{let e=await fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!e.ok)throw Error("Network response was not ok")}};for(let x=1;x<=e;x++)try{await s();break}catch(p){x===e?console.error("Error sending tracking data after retries:",p):(console.warn(`Retry ${x} failed, retrying...`),await new Promise(e=>setTimeout(e,Math.min(2**x*1e3,3e4))))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>o(3)):o(3)}();
